// @ts-check
const weaponData = [
  {
    "5": 0,
    "4": 0,
    "3": 0
  },
  {
    "5": 60,
    "4": 40,
    "3": 28
  },
  {
    "5": 155,
    "4": 103,
    "3": 70
  },
  {
    "5": 290,
    "4": 193,
    "3": 130
  },
  {
    "5": 470,
    "4": 313,
    "3": 210
  },
  {
    "5": 703,
    "4": 468,
    "3": 313
  },
  {
    "5": 995,
    "4": 663,
    "3": 440
  },
  {
    "5": 1348,
    "4": 898,
    "3": 595
  },
  {
    "5": 1768,
    "4": 1178,
    "3": 780
  },
  {
    "5": 2263,
    "4": 1508,
    "3": 998
  },
  {
    "5": 2833,
    "4": 1888,
    "3": 1248
  },
  {
    "5": 3485,
    "4": 2323,
    "3": 1535
  },
  {
    "5": 4225,
    "4": 2815,
    "3": 1860
  },
  {
    "5": 5055,
    "4": 3368,
    "3": 2225
  },
  {
    "5": 5978,
    "4": 3983,
    "3": 2630
  },
  {
    "5": 6998,
    "4": 4663,
    "3": 3080
  },
  {
    "5": 8123,
    "4": 5413,
    "3": 3575
  },
  {
    "5": 9353,
    "4": 6233,
    "3": 4115
  },
  {
    "5": 10695,
    "4": 7128,
    "3": 4705
  },
  {
    "5": 12155,
    "4": 8100,
    "3": 5348
  },
  {
    "5": 13730,
    "4": 9150,
    "3": 6040
  },
  {
    "5": 15515,
    "4": 10340,
    "3": 6825
  },
  {
    "5": 17433,
    "4": 11618,
    "3": 7668
  },
  {
    "5": 19488,
    "4": 12988,
    "3": 8573
  },
  {
    "5": 21685,
    "4": 14453,
    "3": 9540
  },
  {
    "5": 24030,
    "4": 16015,
    "3": 10573
  },
  {
    "5": 26525,
    "4": 17678,
    "3": 11670
  },
  {
    "5": 29173,
    "4": 19443,
    "3": 12835
  },
  {
    "5": 31978,
    "4": 21313,
    "3": 14070
  },
  {
    "5": 34945,
    "4": 23290,
    "3": 15375
  },
  {
    "5": 38080,
    "4": 25380,
    "3": 16755
  },
  {
    "5": 41385,
    "4": 27583,
    "3": 18208
  },
  {
    "5": 44865,
    "4": 29903,
    "3": 19738
  },
  {
    "5": 48523,
    "4": 32340,
    "3": 21348
  },
  {
    "5": 52363,
    "4": 34900,
    "3": 23038
  },
  {
    "5": 56388,
    "4": 37583,
    "3": 24808
  },
  {
    "5": 60603,
    "4": 40393,
    "3": 26663
  },
  {
    "5": 65013,
    "4": 43333,
    "3": 28603
  },
  {
    "5": 69623,
    "4": 46405,
    "3": 30630
  },
  {
    "5": 74435,
    "4": 49613,
    "3": 32748
  },
  {
    "5": 79450,
    "4": 52955,
    "3": 34953
  },
  {
    "5": 84938,
    "4": 56613,
    "3": 37368
  },
  {
    "5": 90650,
    "4": 60420,
    "3": 39880
  },
  {
    "5": 96590,
    "4": 64380,
    "3": 42493
  },
  {
    "5": 102763,
    "4": 68495,
    "3": 45208
  },
  {
    "5": 109173,
    "4": 72768,
    "3": 48028
  },
  {
    "5": 115823,
    "4": 77200,
    "3": 50953
  },
  {
    "5": 122715,
    "4": 81795,
    "3": 53985
  },
  {
    "5": 129855,
    "4": 86555,
    "3": 57128
  },
  {
    "5": 137250,
    "4": 91485,
    "3": 60383
  },
  {
    "5": 144900,
    "4": 96585,
    "3": 63748
  },
  {
    "5": 153208,
    "4": 102123,
    "3": 67403
  },
  {
    "5": 161793,
    "4": 107845,
    "3": 71180
  },
  {
    "5": 170658,
    "4": 113755,
    "3": 75080
  },
  {
    "5": 179813,
    "4": 119858,
    "3": 79108
  },
  {
    "5": 189255,
    "4": 126153,
    "3": 83263
  },
  {
    "5": 198995,
    "4": 132645,
    "3": 87548
  },
  {
    "5": 209030,
    "4": 139335,
    "3": 91963
  },
  {
    "5": 219370,
    "4": 146228,
    "3": 96513
  },
  {
    "5": 230018,
    "4": 153325,
    "3": 101198
  },
  {
    "5": 240975,
    "4": 160630,
    "3": 106020
  },
  {
    "5": 252810,
    "4": 168520,
    "3": 111228
  },
  {
    "5": 264980,
    "4": 176633,
    "3": 116583
  },
  {
    "5": 277490,
    "4": 184973,
    "3": 122088
  },
  {
    "5": 290345,
    "4": 193543,
    "3": 127743
  },
  {
    "5": 303550,
    "4": 202345,
    "3": 133553
  },
  {
    "5": 317108,
    "4": 211383,
    "3": 139518
  },
  {
    "5": 331020,
    "4": 220658,
    "3": 145640
  },
  {
    "5": 345293,
    "4": 230173,
    "3": 151920
  },
  {
    "5": 359930,
    "4": 239930,
    "3": 158360
  },
  {
    "5": 374938,
    "4": 249935,
    "3": 164963
  },
  {
    "5": 391090,
    "4": 260703,
    "3": 172070
  },
  {
    "5": 407640,
    "4": 271735,
    "3": 179353
  },
  {
    "5": 424590,
    "4": 283035,
    "3": 186810
  },
  {
    "5": 441945,
    "4": 294605,
    "3": 194445
  },
  {
    "5": 459710,
    "4": 306448,
    "3": 202260
  },
  {
    "5": 477890,
    "4": 318568,
    "3": 210260
  },
  {
    "5": 496490,
    "4": 330968,
    "3": 218445
  },
  {
    "5": 515515,
    "4": 343650,
    "3": 226815
  },
  {
    "5": 534968,
    "4": 356618,
    "3": 235373
  },
  {
    "5": 554855,
    "4": 369875,
    "3": 244123
  },
  {
    "5": 578328,
    "4": 385523,
    "3": 254450
  },
  {
    "5": 604710,
    "4": 403110,
    "3": 266058
  },
  {
    "5": 634350,
    "4": 422870,
    "3": 279100
  },
  {
    "5": 667648,
    "4": 445068,
    "3": 293750
  },
  {
    "5": 705043,
    "4": 469998,
    "3": 310205
  },
  {
    "5": 747035,
    "4": 497993,
    "3": 328683
  },
  {
    "5": 794173,
    "4": 529418,
    "3": 349423
  },
  {
    "5": 847078,
    "4": 564688,
    "3": 372700
  },
  {
    "5": 906445,
    "4": 604265,
    "3": 398820
  }
]
const levelData = [0, 1000, 2325, 4025, 6175, 8800, 11950, 15675, 20025, 25025, 30725, 37175, 44400, 52450, 61375, 71200, 81950, 93675, 106400, 120175, 135050, 151850, 169850, 189100, 209650, 231525, 254775, 279425, 305525, 333100, 362200, 392850, 425100, 458975, 494525, 531775, 570750, 611500, 654075, 698500, 744800, 795425, 848125, 902900, 959800, 1018875, 1080150, 1143675, 1209475, 1277600, 1348075, 1424575, 1503625, 1585275, 1669550, 1756500, 1846150, 1938550, 2033725, 2131725, 2232600, 2341550, 2453600, 2568775, 2687100, 2808625, 2933400, 3061475, 3192875, 3327650, 3465825, 3614525, 3766900, 3922975, 4082800, 4246400, 4413825, 4585125, 4760350, 4939525]
$(function () {
  /** @type {[number, number, number]} */
  let values = [0,0,5]
  let [level1, level2, stars] = values;
  $("#wlevel1").on("change", function (e) {
    /**
     * @type {HTMLInputElement}
     */
    // @ts-expect-error
    const target = e.target;
    level1 = +target.value;
    calculate()
  })
  $("#wlevel2").on("change", function (e) {
    /**
     * @type {HTMLInputElement}
     */
    // @ts-expect-error
    const target = e.target;
    level2 = +target.value
    calculate()
  })
  $("#stars").on("change", function (e) {
    /**
     * @type {HTMLSelectElement}
     */
    // @ts-expect-error
    const target = e.target;
    stars = +target.value
    calculate()
  })
  /**
   * 计算经验和经验书数量
   */
  function calculate() {
    const exp1 = weaponData[level1 - 1][stars]
    const exp2 = weaponData[level2 - 1][stars]
    let needMora = exp2 - exp1;
    if (needMora < 0) {
      needMora = 0;
    }
    const needExp = needMora * 10;
    const needOre = needExp / 10000;
    $("#wmora").text(Math.floor(needMora));
    $("#wexp").text(Math.floor(needExp));
    $("#wbook").text(Math.ceil(needOre));
  }
})
$(function () {
  /** @type {[number, number]} */
  let values = [0,0]
  let [level1, level2] = values;
  $("#clevel1").on("change", function (e) {
    /**
     * @type {HTMLInputElement}
     */
    // @ts-expect-error
    const target = e.target;
    level1 = +target.value;
    calculate()
  })
  $("#clevel2").on("change", function (e) {
    /**
     * @type {HTMLInputElement}
     */
    // @ts-expect-error
    const target = e.target;
    level2 = +target.value
    calculate()
  })
  /**
   * 计算经验和经验书数量
   */
  function calculate() {
    const exp1 = levelData[level1 - 1]
    const exp2 = levelData[level2 - 1]
    let needExp = exp2 - exp1;
    if (needExp < 0) {
      needExp = 0;
    }
    if (isNaN(needExp)) {
      return
    }
    const needBook = Math.ceil(needExp / 2000);
    $("#cexp").text(Math.floor(needExp));
    $("#cbook").text(needBook);
  }
})